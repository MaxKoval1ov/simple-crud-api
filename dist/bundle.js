(()=>{var e={389:(e,n,t)=>{const o=t(685),{getPersons:i,getPerson:s,createPerson:r,updatePerson:a,deletePerson:c}=t(91);t(142).config();const d=o.createServer((async(e,n)=>{try{if("/person"===e.url&&"GET"===e.method)i(e,n);else if(e.url.match(/\/person\/([0-9-]*)/)&&"GET"===e.method){const t=e.url.split("/")[2];t?s(e,n,t):(n.writeHead(400,{"Content-Type":"application/json"}),n.end(JSON.stringify({message:"Id not fund"})))}else if(e.url.match(/\/person\/([0-9-]*)/)&&"DELETE"===e.method){const t=e.url.split("/")[2];t?c(e,n,t):(n.writeHead(400,{"Content-Type":"application/json"}),n.end(JSON.stringify({message:"Id not fund"})))}else if(e.url.match(/\/person\/([0-9-]*)/)&&"PUT"===e.method){const t=e.url.split("/")[2];t?a(e,n,t):(n.writeHead(400,{"Content-Type":"application/json"}),n.end(JSON.stringify({message:"Id not fund"})))}else"/person"===e.url&&"POST"===e.method?r(e,n):(n.writeHead(404,{"Content-Type":"application/json"}),n.end(JSON.stringify({message:"Route not found"})))}catch(e){n.writeHead(500,{"Content-Type":"application/json"}),n.end(JSON.stringify({message:"Server Error"}))}})),p=process.env.PORT||5e3;d.listen(p,(()=>{console.log(`server started on port: ${p}`)})),e.exports=d},91:(e,n,t)=>{const o=t(229),{getPostData:i}=t(288);e.exports={getPersons:async function(e,n){try{const e=await o.findAll();n.writeHead(200,{"Content-Type":"application/json"}),n.end(JSON.stringify(e))}catch(e){console.log(e)}},getPerson:async function(e,n,t){try{const e=await o.findById(t),i=await o.findByIndex(t);e||i?(n.writeHead(200,{"Content-Type":"application/json"}),n.end(JSON.stringify(e||i))):(n.writeHead(404,{"Content-Type":"application/json"}),n.end(JSON.stringify({message:`Person with id: ${t} Not Found`})))}catch(e){console.log(e)}},createPerson:async function(e,n){try{const t=await i(e),{name:s,secName:r,age:a,hobbies:c}=JSON.parse(t);if(!a||!c||!s)return n.writeHead(400,{"Content-Type":"application/json"}),n.end("Name, age, hobbies are required!");const d={name:s,secName:r,age:a,hobbies:c},p=await o.create(d);return n.writeHead(201,{"Content-Type":"application/json"}),n.end(JSON.stringify(p))}catch(e){console.log(e)}},updatePerson:async function(e,n,t){try{const s=await o.findById(t);if(s){const r=await i(e),{name:a,secName:c,age:d,hobbies:p}=JSON.parse(r),u={name:a||s.name,secName:c||s.secName,age:d||s.age,hobbies:p||s.hobbies},l=await o.update(t,u);return n.writeHead(200,{"Content-Type":"application/json"}),n.end(JSON.stringify(l))}n.writeHead(404,{"Content-Type":"application/json"}),n.end(JSON.stringify({message:"Person Not Found"}))}catch(e){console.log(e)}},deletePerson:async function(e,n,t){try{await o.findById(t)?(await o.remove(t),n.writeHead(204,{"Content-Type":"application/json"}),n.end(JSON.stringify({message:`Person ${t} removed`}))):(n.writeHead(404,{"Content-Type":"application/json"}),n.end(JSON.stringify({message:`Person with id: ${t} Not Found`})))}catch(e){console.log(e)}}}},530:e=>{e.exports=[]},229:(e,n,t)=>{const o=t(828);let i=t(530);const{writeDataToFile:s}=t(288),r="./data/persons.json";e.exports={findAll:function(){return new Promise(((e,n)=>{e(i)}))},findById:function(e){return new Promise(((n,t)=>{n(i.find((n=>n.id===e)))}))},findByIndex:function(e){return new Promise(((n,t)=>{n(i[e])}))},create:function(e){return new Promise(((n,t)=>{const a={id:o.v4(),...e};i.push(a),s(r,i),n(a)}))},update:function(e,n){return new Promise(((t,o)=>{const a=i.findIndex((n=>n.id===e));i[a]={id:e,...n},s(r,i),t(i[a])}))},remove:function(e){return new Promise(((n,t)=>{i=i.filter((n=>n.id!==e)),s(r,i),n()}))}}},288:(e,n,t)=>{const o=t(147);e.exports={writeDataToFile:function(e,n){o.writeFileSync(e,JSON.stringify(n),"utf8",(e=>{e&&console.log(e)}))},getPostData:function(e){return new Promise(((n,t)=>{try{let t="";e.on("data",(e=>{t+=e.toString()})),e.on("end",(()=>{n(t)}))}catch(e){t(e)}}))}}},142:e=>{"use strict";e.exports=require("dotenv")},828:e=>{"use strict";e.exports=require("uuid")},147:e=>{"use strict";e.exports=require("fs")},685:e=>{"use strict";e.exports=require("http")}},n={};(function t(o){var i=n[o];if(void 0!==i)return i.exports;var s=n[o]={exports:{}};return e[o](s,s.exports,t),s.exports})(389)})();